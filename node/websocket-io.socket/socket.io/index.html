<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Socket.io Test</title>
        <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
        <script type="text/javascript">
            var host = window.document.location.host.replace(/:.*/, '');
            var socket = io.connect('http://' + host + ':3002');

            socket.on("connect", function() {
                console.log("connect");
            });
            socket.on("disconnect", function(client){
                console.log("disconnect");
            });
            socket.on("message", function(data){
                console.log('onmessage: ' + data);
            });

        </script>

        <script type="text/javascript">
            $(document).ready(function(){
                var $node = $('.message-box'),
                    $text = $node.find('input[type=text]');
                    $node.on('click', 'input[type=button]', function(e) {
                    e.preventDefault();
                    var msg = $text.val(); $text.val("");
                    // socket send
                    socket.emit("message", msg);

                });
            });
        </script>
    </head>
    <body>
        This is Socket.io Page
        <div class="message-box">
            <input type="text">
            <input type="button" value="送信">
        </div>
        <div id="msg_list"></div>


    </body>
</html>
