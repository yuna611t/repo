<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Move Images | Learning Parallax effect</title>

	<style type="text/css">
		body {
			height: 2000px;
		}
		h1 {
			font-size: 100%;
		}
		.indicator {
			margin: 0;
			position: fixed;
			right: 10px;
			top: 10px;
		}
		.indicator {
			background: rgba(255, 255, 255, 0.8);
		}
		section {
			height: 350px;
		}
		section p {
			color: #fff;
			margin: 0;
			padding: 8px;
		}
		#section1 {
			background: url(img/p4057911-500x375.jpg) repeat-x;
		}
		#section2 {
			background: url(img/P5020772-500x375.jpg) repeat-x;
		}
		#section3 {
			background: url(img/pc071520-500x375.jpg) repeat-x;
		}
		#section4 {
			background: url(img/showa004-500x375.jpg) repeat-x;
		}
		#sectionAshColor {
			background: #666;
		}
		#sectionRedColor {
			background: #900;
		}

	</style>

	<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	
	<script type="text/javascript">
	$(function() {
		var section2PosTop = $('#section2').offset().top ,
			section3PosTop = $('#section3').offset().top ,
			section4PosTop = $('#section4').offset().top 
		;
		$(window).scroll(function() {
			var value = $(this).scrollTop();
			$('#scrollValue').text(value);
			
			$('#area1').css({'background-position': 0 + 'px ' + value + 'px'});

			if (value > section2PosTop) {
				$('#section2').css({'background-position': 0 + 'px ' + (value - section2PosTop)*2 + 'px'});
			} else {
				$('#section2').css({'background-position': 'top' });
			}
			if (value > section3PosTop) {
				$('#section3').css({'background-position': 0 + 'px ' + (value - section3PosTop)*2 + 'px'});
			} else {
				$('#section3').css({'background-position': 'top' });
			}
			if (value > section4PosTop) {
				$('#section4').css({'background-position': 0 + 'px '  + (value - section4PosTop)*2 + 'px' });
			} else {
				$('#section4').css({'background-position': 'top'});
			}
			
		});
	});
	</script>
</head>
<body>
	<h1>背景画像を上下に動かす</h1>
	<p class="indicator">スクロール値 | <span id="scrollValue">0</span></p>
	
	<section id="section1">
		<p>Section 1</p>
	</section>
	<section id="section2">
		<p>Section 2</p>
	</section>
	<section id="section3">
		<p>Section 3</p>
	</section>
	<section id="section4">
		<p>Section 4</p>
	</section>
</body>
</html>