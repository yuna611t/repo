<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>D3.jsの勉強</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
<style>
svg { width: 380px; height: 320px; border: 1px solid black; }
circle { stroke: none; }
</style>
    </head>
    <body>

<h1>パックレイアウトを表示</h1>
<svg id="myGraph"></svg>

<script type="text/javascript">
// SVG要素
var svgEle = document.getElementById("myGraph");
var svgWidth = window.getComputedStyle(svgEle,null).getPropertyValue("width");
var svgHeight = window.getComputedStyle(svgEle,null).getPropertyValue("height");
// データセット
var dataSet = {
    value: 40,
    children: [
        { value: 35 },
        { value: 100 },
        { value: 200 },
        { value: 900,
            children: [
                { value: 20 },
                { value: 50 }
            ]
        }
    ]
};
// カラーの準備
var color = d3.scale.category10();
// パックレイアウト
var bubble = d3.layout.pack()
    .size([320, 320])
d3.select("#myGraph")
    .selectAll("circle")
    .data(bubble.nodes(dataSet))
    .enter()
    .append("circle")
    .attr("cx", function (d, i) {
        return d.x;
    })
    .attr("cy", function (d, i) {
        return d.y;
    })
    .attr("r", 0)
    .transition()
    .duration(function (d, i) {
        return d.depth * 1000 + 500;
    })
    .attr("r", function (d) {
        return d.r;
    })
    .style("fill", function (d, i) {
        return color(i);
    })

</script>
    </body>
</html>
